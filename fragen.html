<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
<title>Sicherheits-Check Fragen & Ma√ünahmen</title>
<style>
.footer {
  text-align: center;
  font-size: 0.8rem;
  color: #888; /* blasser Grauton */
  padding: 20px 0;
}

.footer a {
  color: #888;
  text-decoration: none;
}

.footer a:hover {
  text-decoration: underline;
}
th.response-header .label-above {
  font-size: 0.75em;
  color: #888;
  text-align: center;
}
.label-above {
  font-size: 0.7em;
  color: #aaa;
  font-weight: 500;
  text-align: center;
  margin-bottom: 0.3em;
  line-height: 1.2;
}
body {
  font-family: Arial, sans-serif;
  margin: 1em;
  background: #d6ecff;
}
.container {
  max-width: 1300px;
  margin: auto;
  background: #fff;
  padding: 1.5em 2em;
  border-radius: 12px;
  box-shadow: 0 8px 16px rgba(0,0,0,0.15);
}
h1, h2 {
  color: #003366;
  user-select: none;
}
.header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 1.5em;
  flex-wrap: wrap;
}
.header-left {
  display: flex;
  flex-direction: column;
  gap: 0.8em;
  min-width: 280px;
}
.header-left label {
  font-weight: 600;
  margin-bottom: 0.25em;
  user-select: none;
  color: #2c3e50;
}
.header-left input[type="text"] {
  padding: 0.4em 0.6em;
  font-size: 1.1em;
  border: 1.5px solid #ccc;
  border-radius: 6px;
  width: 100%;
  box-sizing: border-box;
}
.header-right {
  font-weight: 600;
  font-size: 1.2em;
  color: #2c3e50;
  user-select: none;
  min-width: 160px;
  text-align: right;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 2em;
  font-size: 1.1em;
}
th, td {
  border: 1px solid #ccc;
  padding: 0.75em 1em;
  vertical-align: top;
}
th {
  background-color: #e2e8f0;
  color: #1a202c;
  user-select: none;
}
label {
  margin-right: 1.2em;
  cursor: pointer;
  user-select: none;
}
input[type="radio"] {
  transform: scale(1.3);
  margin-right: 0.3em;
  vertical-align: middle;
}
tbody tr {
  height: 3.2em;
}
#questionsTable th:nth-child(2),
#questionsTable td:nth-child(2) {
  width: 60%;
}

/* Optimierungen f√ºr iPad / Touch-Ger√§te */
@media (max-width: 1024px) {
  body {
    margin: 0.5em;
  }
  .container {
    padding: 1em 1.2em;
    border-radius: 10px;
  }
  table {
    font-size: 1.2em;
  }
  label {
    margin-right: 1.5em;
  }
  input[type="radio"] {
    transform: scale(1.4);
  }
  #questionsTable th:nth-child(2),
  #questionsTable td:nth-child(2) {
    width: 60%;
  }
}
</style>
</head>
<body>
<div class="container">
  <h1>Sicherheits-Check</h1>

  <div class="header" role="region" aria-label="Marktdaten und aktuelles Datum">
    <div class="header-left">
      <div>
        <label for="marktnummer">Marktnummer</label><br />
        <input type="text" id="marktnummer" name="marktnummer" placeholder="Marktnummer eingeben" autocomplete="off" />
      </div>
      <div>
        <label for="name">Name</label><br />
        <input type="text" id="name" name="name" placeholder="Name eingeben" autocomplete="off" />
      </div>
      <div>
        <label for="sifa">Sifa</label><br />
        <input type="text" id="sifa" name="sifa" placeholder="Sifa eingeben" autocomplete="off" />
      </div>
    </div>
    <div class="header-right" id="currentDate" aria-live="polite" aria-atomic="true"></div>
  </div>

  <h2>Fragen</h2>
  <table id="questionsTable" role="grid" aria-label="Fragen und Antwortoptionen">
    <thead>
      <tr>
        <th>#</th>
        <th>Frage</th>
        <th class="response-header"><div class="label-above">Ja</div></th>
        <th class="response-header"><div class="label-above">Nein</div></th>
        <th class="response-header"><div class="label-above">Nicht vorhanden</div></th>
      </tr>
    </thead>
    <tbody>
      <!-- Fragen werden dynamisch eingef√ºgt -->
    </tbody>
  </table>

  <h2>Ma√ünahmen bei "Nein"-Antworten</h2>
  <table id="measuresTable" role="grid" aria-label="Ma√ünahmen f√ºr nicht erf√ºllte Fragen">
    <thead>
      <tr>
        <th scope="col">Frage</th>
        <th scope="col">Ma√ünahme</th>
      </tr>
    </thead>
    <tbody>
      <!-- Ma√ünahmen erscheinen hier -->
    </tbody>
  </table>
</div>
<br>
<div style="text-align: center; margin-bottom: 1em;">
 <div style="display: flex; justify-content: center; gap: 20px; margin: 20px 0;">
  <button id="openMeasuresBtn" style="
    flex: 1;
    max-width: 300px;
    font-size: 1em;
    padding: 0.5em 1em;
    border-radius: 6px;
    background: #d3d3d3;
    color: #000;
    border: none;
    cursor: pointer;
    user-select: none;
  ">
    Ma√ünahmen in neuer Seite anzeigen
  </button>

  <button onclick="generateAndSharePDF()" style="
    flex: 1;
    max-width: 300px;
    font-size: 1em;
    padding: 0.5em 1em;
    border-radius: 6px;
    background: #d3d3d3;
    color: #000;
    border: none;
    cursor: pointer;
    user-select: none;
  ">
    üì§ PDF teilen (iPad)
  </button>

</div> 
</div>
</div>
<script>
// Datum setzen
function formatDate(date) {
  return date.toLocaleDateString('de-DE', { year: 'numeric', month: '2-digit', day: '2-digit' });
}
document.getElementById("currentDate").textContent = "Datum: " + formatDate(new Date());

// Alle Fragen und Ma√ünahmen
const questionsMeasures = {
"Werden Technik- und Heizr√§ume als Lagerr√§ume genutzt?": "Technik- und Heizr√§ume d√ºrfen nicht als Lagerr√§ume genutzt werden.",
  "Befindet sich brennbares Material (z.‚ÄØB. Kisten, Kartons) in den Technik- oder Heizr√§umen?": "Brennbares Material muss aus Technik- und Heizr√§umen entfernt werden.",
  "Sind die Treppen unbesch√§digt und frei von Gegenst√§nden?": "Treppen m√ºssen frei und unbesch√§digt sein.",
  "Sind die Verkehrswege so beschaffen, dass kein Risiko zum Stolpern, Ausrutschen oder Umknicken besteht?": "Verkehrswege m√ºssen sicher und ohne Stolperfallen sein.",
  "Wird im gesamten Markt geeignetes Schuhwerk getragen (feste, geschlossene, flache Schuhe)?": "Es muss geeignetes Schuhwerk getragen werden.",
  "Sind Automatikt√ºren, Rolltore und Schnelllauftore gepr√ºft und ohne sichtbare Besch√§digungen?": "T√ºren und Tore m√ºssen gepr√ºft und unbesch√§digt sein.",
  "Ist die Aufzugsanlage gepr√ºft und in einem ordnungsgem√§√üen Zustand (keine sichtbare Besch√§digung, funktionsf√§hige Schutzeinrichtungen)?": "Die Aufzugsanlage muss funktionst√ºchtig und gepr√ºft sein.",
  "Ist die Leergutr√ºcknahme in einem ordnungsgem√§√üen Zustand (intakte Schutzeinrichtungen, gesicherte Einzugsstellen, keine Glasscherben)?": "Leergutr√ºcknahme muss sicher und funktionsf√§hig sein.",
  "Stehen geeignete Handschuhe f√ºr die Leergutr√ºcknahme zur Verf√ºgung?": "Geeignete Handschuhe m√ºssen bereitgestellt werden.",
  "Sind Leitern gepr√ºft gem√§√ü 'Leitern und Tritte' (BGV D36 bzw. GUV-VD360)?": "Leitern m√ºssen regelm√§√üig gepr√ºft werden.",
  "Ist das Leiter-Kontrollblatt im Ordner Arbeitssicherheit abgelegt?": "Leiter-Kontrollblatt muss ordnungsgem√§√ü abgelegt sein.",
  "Werden aus dem Ordersatz geeignete Sicherheitsmesser verwendet?": "Nur geeignete Sicherheitsmesser d√ºrfen verwendet werden.",
  "Sind zur Zeit der Begehung keine sichtbaren Besch√§digungen an Schaltern und Steckdosen vorhanden?": "Schalter und Steckdosen d√ºrfen keine sichtbaren M√§ngel aufweisen.",
  "Ist der Gabelhubwagen in einem ordnungsgem√§√üen Zustand ohne sichtbare Besch√§digungen?": "Der Gabelhubwagen muss gepr√ºft und intakt sein.",
  "Ist der elektrische Hubwagen gepr√ºft und in einem ordnungsgem√§√üen Zustand (keine sichtbaren Besch√§digungen, funktionsf√§hige Schutzeinrichtungen)?": "Der elektrische Hubwagen muss betriebsbereit und gepr√ºft sein.",
  "Ist der elektrische Hubwagen gegen unbefugte Benutzung gesichert?": "Der Hubwagen muss vor unbefugtem Zugriff gesch√ºtzt werden.",
  "Werden Sicherheitsschuhe getragen?": "Sicherheitsschuhe sind Pflicht.",
  "Sind die Feuerl√∂scheinrichtungen frei zug√§nglich und nicht blockiert?": "Feuerl√∂scheinrichtungen m√ºssen stets zug√§nglich sein.",
  "Sind die Feuerl√∂scheinrichtungen gepr√ºft und werden Pr√ºffristen eingehalten?": "Feuerl√∂scher m√ºssen regelm√§√üig gepr√ºft werden.",
  "Sind Brandschutzt√ºren frei von Zugestellungen und wird ihre Funktion nicht gest√∂rt?": "Brandschutzt√ºren d√ºrfen nicht blockiert sein.",
  "Sind T√ºrhaltevorrichtungen und Schlie√üfolgeregler des Feuerschutzabschlusses in Ordnung?": "T√ºrtechnik muss voll funktionsf√§hig sein.",
  "Sind Brandschutzt√ºren ohne Besch√§digungen?": "Besch√§digte Brandschutzt√ºren m√ºssen instandgesetzt werden.",
  "Ist ein aktueller Flucht- und Rettungsplan vorhanden?": "Ein aktueller Fluchtplan muss vorliegen.",
  "Ist die Notausgangsbeleuchtung ohne Defekte?": "Notbeleuchtung muss funktionst√ºchtig sein.",
  "Sind Notausg√§nge frei zug√§nglich und nicht zugestellt?": "Notausg√§nge d√ºrfen nicht verstellt sein.",
  "Sind Notausg√§nge und -ausstiege von innen ohne fremde Hilfe zu √∂ffnen und nicht zugestellt?": "Notausstiege m√ºssen jederzeit frei nutzbar sein.",
  "F√ºhren Notausg√§nge in sichere Bereiche?": "Notausg√§nge m√ºssen in sichere Bereiche f√ºhren.",
  "Wird passende pers√∂nliche Schutzausr√ºstung f√ºr T√§tigkeiten mit Gefahrstoffen (z.B. Schutzbrille, Handschuhe) gestellt?": "Geeignete PSA muss vorhanden sein.",
  "Sind Betriebsanweisungen gut zug√§nglich?": "Betriebsanweisungen m√ºssen zug√§nglich sein.",
  "Werden Sicherheitsanweisungen eingehalten?": "Sicherheitsanweisungen sind strikt einzuhalten.",
  "Sind die Arbeitsger√§te an der Backstation intakt und funktionsf√§hig?": "Arbeitsger√§te m√ºssen funktionst√ºchtig sein.",
  "Sind alle elektrischen Ger√§te mit Schutzkontaktsteckern versehen?": "Elektrische Ger√§te m√ºssen geerdet sein.",
  "Sind die Steckdosen nicht √ºberlastet?": "√úberlastung von Steckdosen vermeiden.",
  "Sind Kabel so verlegt, dass keine Stolperfallen entstehen?": "Kabel sicher verlegen.",
  "Ist die Beleuchtung in Arbeitsbereichen ausreichend und funktionst√ºchtig?": "Beleuchtung muss angemessen sein.",
  "Sind Mitarbeiter f√ºr Gefahrstoffe geschult?": "Schulungen zum Gefahrstoffschutz durchf√ºhren.",
  "Sind Gefahrstoffe ordnungsgem√§√ü gekennzeichnet und gelagert?": "Gefahrstoffe korrekt kennzeichnen und lagern.",
  "Sind Feuerl√∂scher ausreichend vorhanden und am richtigen Standort?": "Feuerl√∂scher an geeigneten Stellen platzieren.",
  "Sind Rauchmelder installiert und funktionsf√§hig?": "Rauchmelder m√ºssen vorhanden sein.",
  "Sind Fluchtwege regelm√§√üig gepr√ºft und nicht blockiert?": "Fluchtwege freihalten und pr√ºfen.",
  "Werden elektrische Leitungen regelm√§√üig auf Besch√§digungen gepr√ºft?": "Leitungen regelm√§√üig kontrollieren.",
  "Sind Arbeitspl√§tze ergonomisch eingerichtet?": "Ergonomie der Arbeitspl√§tze sicherstellen.",
  "Werden L√§rmpegel √ºberwacht und Schutzma√ünahmen getroffen?": "L√§rmschutz gew√§hrleisten.",
  "Sind Sicherheitskennzeichnungen gut sichtbar und aktuell?": "Kennzeichnungen aktuell halten.",
  "Werden Arbeitsmittel regelm√§√üig gewartet?": "Regelm√§√üige Wartung sicherstellen.",
  "Sind Stolperfallen (z.B. Kabel, Schl√§uche) entfernt?": "Stolperfallen beseitigen.",
  "Sind Leitern und Tritte sicher und gepr√ºft?": "Leitern m√ºssen gepr√ºft sein.",
  "Sind Container und Abfallbeh√§lter regelm√§√üig entleert?": "Regelm√§√üige Entleerung gew√§hrleisten.",
  "Werden Lasten richtig gehoben und Transporthilfen genutzt?": "Richtiges Heben und Transportieren beachten.",
  "Sind Arbeitsanweisungen aktuell und f√ºr Mitarbeiter zug√§nglich?": "Arbeitsanweisungen bereitstellen.",
  "Sind Mitarbeiter √ºber Erste-Hilfe-Standorte informiert?": "Information √ºber Erste-Hilfe sicherstellen.",
  "Sind Kinder und Unbefugte vom Betriebsgel√§nde ausgeschlossen?": "Zutritt regeln und kontrollieren.",
  "Werden Gefahrstoffe sachgerecht entsorgt?": "Gefahrstoffentsorgung beachten.",
  "Sind alle T√ºren und Tore funktionsf√§hig und sicher?": "T√ºren und Tore warten und sichern.",
  "Sind Sicherheitsbeleuchtungen und Notbeleuchtungen gepr√ºft?": "Beleuchtung pr√ºfen.",
  "Sind die Schutzeinrichtungen der Maschinen vollst√§ndig?": "Schutzeinrichtungen sicherstellen.",
  "Sind Mitarbeiter bei Arbeiten in der H√∂he gesichert?": "Sicherung bei H√∂henarbeiten gew√§hrleisten.",
  "Ist der Brandschutzplan aktuell und bekannt?": "Brandschutzplan aktuell halten.",
  "Sind Fluchtwege mit Notausgangsschildern gut sichtbar gekennzeichnet?": "Kennzeichnung der Fluchtwege pr√ºfen.",
  "Ist der Zugang zu Feuerl√∂schern jederzeit frei?": "Zugang freihalten.",
  "Sind Sicherheitsunterweisungen dokumentiert?": "Unterweisungen dokumentieren.",
  "Sind alle Sicherheitskennzeichnungen gut lesbar?": "Lesbarkeit der Kennzeichnungen sicherstellen.",
  "Sind Mitarbeiter bei der Nutzung von Gefahrstoffen richtig gesch√ºtzt?": "Schutzma√ünahmen einhalten.",
  "Sind Maschinen vor unbeabsichtigtem Start gesch√ºtzt?": "Maschinen sicher machen.",
  "Sind Aufz√ºge gepr√ºft und d√ºrfen benutzt werden?": "Aufzugspr√ºfung gew√§hrleisten.",
  "Sind pers√∂nliche Schutzausr√ºstungen (PSA) ausreichend vorhanden?": "PSA muss ausreichend zur Verf√ºgung stehen.",
  "Werden regelm√§√üig Brandschutz√ºbungen durchgef√ºhrt?": "Brandschutz√ºbungen sind durchzuf√ºhren.",
  "Sind Flucht- und Rettungswege ausreichend beleuchtet?": "Beleuchtung der Fluchtwege sicherstellen.",
  "Sind alle Notfallkontakte sichtbar und aktuell?": "Notfallkontakte sichtbar halten.",
  "Sind Gefahrstoffdatenbl√§tter an den Arbeitspl√§tzen verf√ºgbar?": "Gefahrstoffdatenbl√§tter bereitstellen.",
  "Werden Arbeitsmittel regelm√§√üig auf M√§ngel √ºberpr√ºft?": "Arbeitsmittel m√ºssen gepr√ºft werden.",
  "Sind Erste-Hilfe-K√§sten vollst√§ndig und zug√§nglich?": "Erste-Hilfe-K√§sten bereitstellen und pr√ºfen.",
  "Sind Maschinen ordnungsgem√§√ü geerdet?": "Maschinen m√ºssen geerdet sein.",
  "Werden Arbeiten mit gef√§hrlichen Maschinen nur von geschultem Personal durchgef√ºhrt?": "Schulungen sicherstellen.",
  "Sind Warnschilder an gef√§hrlichen Stellen gut sichtbar?": "Warnschilder m√ºssen vorhanden sein.",
  "Ist die Temperatur in Arbeitsbereichen angenehm und sicher?": "Angenehme und sichere Temperatur sicherstellen.",
  "Sind Chemikalien sicher und vorschriftsm√§√üig gelagert?": "Chemikalien ordnungsgem√§√ü lagern.",
  "Sind Arbeitspl√§tze sauber und ordentlich?": "Sauberkeit gew√§hrleisten.",
  "Werden Abf√§lle ordnungsgem√§√ü getrennt und entsorgt?": "Abfalltrennung einhalten.",
  "Sind Schutzvorrichtungen an Maschinen funktionst√ºchtig?": "Schutzvorrichtungen regelm√§√üig pr√ºfen.",
  "Sind elektrische Schaltk√§sten verschlossen und gesichert?": "Schaltk√§sten m√ºssen sicher verschlossen sein.",
  "Sind Mitarbeitende √ºber das Verhalten im Brandfall informiert?": "Brandverhalten kommunizieren.",
  "Sind Gefahrstoffe mit Gefahrstoffsymbolen gekennzeichnet?": "Gefahrstoffkennzeichnung beachten.",
  "Werden Druckbeh√§lter regelm√§√üig gepr√ºft?": "Pr√ºfung von Druckbeh√§ltern sicherstellen.",
  "Sind Arbeitszeitregelungen eingehalten?": "Arbeitszeitregelungen beachten.",
  "Sind Mitarbeiter vor √úberlastung gesch√ºtzt?": "√úberlastung vermeiden.",
  "Sind Ergonomie-Regeln an Bildschirmarbeitspl√§tzen umgesetzt?": "Ergonomie sicherstellen.",
  "Sind Beleuchtungsst√§rken an Bildschirmarbeitspl√§tzen ausreichend?": "Beleuchtung anpassen.",
  "Sind die Erste-Hilfe-Ma√ünahmen dokumentiert?": "Dokumentation sicherstellen.",
  "Sind Gefahrenhinweise f√ºr Arbeitsmittel vorhanden?": "Gefahrenhinweise bereitstellen.",
  "Ist eine regelm√§√üige Gef√§hrdungsbeurteilung durchgef√ºhrt?": "Gef√§hrdungsbeurteilung aktuell halten.",
  "Sind die Verantwortlichkeiten f√ºr Arbeitssicherheit klar definiert?": "Verantwortlichkeiten kl√§ren.",
  "Sind elektrische Ger√§te regelm√§√üig gepr√ºft?": "Ger√§tepr√ºfungen durchf√ºhren.",
  "Werden Sicherheitsvorschriften bei Wartungsarbeiten eingehalten?": "Vorschriften beachten.",
  "Sind Ladestationen f√ºr Elektrofahrzeuge sicher?": "Sicherheit bei Ladestationen gew√§hrleisten.",
  "Sind Mitarbeiter in Brandschutz und Evakuierung geschult?": "Schulungen durchf√ºhren.",
  "Sind Mitarbeiter im Umgang mit Gefahrstoffen unterwiesen?": "Unterweisungen sicherstellen.",
  "Sind die Maschinen gegen unbeabsichtigtes Starten gesichert?": "Maschinensicherungen pr√ºfen.",
  "Sind Fluchtwege barrierefrei?": "Barrierefreiheit sicherstellen.",
  "Ist die Arbeitsschutzbeleuchtung ausreichend?": "Arbeitsschutzbeleuchtung pr√ºfen.",
  "Sind alle Sicherheitseinrichtungen an Maschinen intakt?": "Sicherheitseinrichtungen pr√ºfen.",
  "Werden Schutzhelme bei Bedarf getragen?": "Schutzhelmpflicht einhalten.",
  "Sind Sicherheitsgurte f√ºr Arbeiten in der H√∂he vorhanden?": "Sicherheitsgurte bereitstellen.",
  "Sind elektrische Anlagen fachgerecht installiert?": "Installation pr√ºfen.",
  "Sind ausreichend Feuerl√∂scher f√ºr den Betrieb vorhanden?": "Feuerl√∂scher bereitstellen.",
  "Ist eine Notfallbeleuchtung installiert?": "Notfallbeleuchtung sicherstellen.",
  "Sind Fluchtwege in regelm√§√üigen Abst√§nden kontrolliert?": "Kontrolle der Fluchtwege durchf√ºhren.",
  "Sind Arbeitspl√§tze frei von Gefahrenquellen?": "Gefahrenquellen beseitigen.",
  "Sind Mitarbeitende √ºber die Gefahren im Betrieb informiert?": "Informationen bereitstellen.",
  "Sind Schutzausr√ºstungen in gutem Zustand?": "Zustand der PSA pr√ºfen.",
  "Werden Arbeitsmittel regelm√§√üig gereinigt?": "Reinigung sicherstellen.",
  "Sind die Pausenr√§ume sauber und sicher?": "Sauberkeit der Pausenr√§ume gew√§hrleisten.",
  "Ist die Notrufnummer gut sichtbar angebracht?": "Notrufnummer sichtbar machen.",
  "Sind Maschinen mit Not-Aus-Schaltern ausgestattet?": "Not-Aus-Schalter pr√ºfen.",
  "Werden Mitarbeiter bei Gefahrstoffunf√§llen richtig versorgt?": "Versorgung sicherstellen.",
  "Sind Feueralarmsysteme funktionsf√§hig?": "Feueralarmsysteme pr√ºfen.",
  "Sind Erste-Hilfe-Ma√ünahmen allen bekannt?": "Bekanntheit sicherstellen.",
  "Sind Betriebsanweisungen f√ºr Maschinen aktuell?": "Aktualit√§t pr√ºfen.",
  "Sind Abfallbeh√§lter regelm√§√üig geleert?": "Regelm√§√üige Leerung sicherstellen.",
  "Sind Gefahrenstoffe richtig gelagert?": "Lagerung kontrollieren.",
  "Sind Maschinen vor Wartungsbeginn gesichert?": "Sicherung vor Wartung beachten.",
  "Sind die Arbeitspl√§tze ergonomisch gestaltet?": "Ergonomie sicherstellen.",
  "Sind alle Personen im Betrieb √ºber Notfallma√ünahmen informiert?": "Information bereitstellen.",
  "Ist die Beleuchtung an Arbeitspl√§tzen ausreichend?": "Beleuchtung pr√ºfen.",
  "Sind Maschinen regelm√§√üig gewartet?": "Wartung sicherstellen.",
  "Sind Arbeitsmittel korrekt gekennzeichnet?": "Kennzeichnung kontrollieren.",
  "Sind Notausg√§nge eindeutig gekennzeichnet?": "Kennzeichnung pr√ºfen.",
  "Ist die Arbeitsschutzunterweisung dokumentiert?": "Dokumentation sicherstellen.",
  "Sind elektrische Anlagen gegen √úberlast gesch√ºtzt?": "Schutz gew√§hrleisten.",
 };

const questionsTableBody = document.querySelector('#questionsTable tbody');
    const measuresTableBody = document.querySelector('#measuresTable tbody');

    // Fragen dynamisch einf√ºgen
    Object.entries(questionsMeasures).forEach(([questionText], index) => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${index + 1}</td>
        <td>${questionText}</td>
        <td><label><input type="radio" name="question${index}" value="ja"></label></td>
        <td><label><input type="radio" name="question${index}" value="nein"></label></td>
        <td><label><input type="radio" name="question${index}" value="nicht vorhanden"></label></td>
      `;
      questionsTableBody.appendChild(row);
    });

    // Ma√ünahmen aktualisieren
    function updateMeasuresTable() {
      measuresTableBody.innerHTML = '';
      const rows = questionsTableBody.querySelectorAll('tr');

      rows.forEach((row, index) => {
        const inputs = row.querySelectorAll('input[type="radio"]');
        const questionText = row.cells[1].textContent;
        const selected = Array.from(inputs).find(i => i.checked)?.value;

        if (selected === 'nein') {
          const measureText = questionsMeasures[questionText];
          const measureRow = document.createElement('tr');
          measureRow.innerHTML = `
            <td>${questionText}</td>
            <td>${measureText}</td>
          `;
          measuresTableBody.appendChild(measureRow);
        }
      });
    }

    // Event Listener auf alle Inputs
    document.addEventListener('change', event => {
      if (event.target.type === 'radio') {
        updateMeasuresTable();
      }
    });

    // Ma√ünahmen in neuem Fenster anzeigen
    document.getElementById('openMeasuresBtn').addEventListener('click', () => {
      const newWindow = window.open('', '_blank');
      const style = `
        <style>
          body { font-family: Arial; padding: 2em; background: #f9f9f9; }
          h1 { color: #003366; }
          table { width: 100%; border-collapse: collapse; margin-top: 1em; }
          th, td { border: 1px solid #ccc; padding: 0.8em; text-align: left; }
          th { background: #e2e8f0; }
        </style>
      `;
      let html = `<html><head><title>Ma√ünahmen</title>${style}</head><body><h1>Ma√ünahmen</h1><table><thead><tr><th>Frage</th><th>Ma√ünahme</th></tr></thead><tbody>`;
      const rows = measuresTableBody.querySelectorAll('tr');
      rows.forEach(row => {
        html += `<tr><td>${row.cells[0].textContent}</td><td>${row.cells[1].textContent}</td></tr>`;
      });
      html += `</tbody></table></body></html>`;
      newWindow.document.write(html);
      newWindow.document.close();
    });
  </script>
<script>
  // Ma√ünahmen zu Fragen (Beispiel-Daten)
  const questionsMeasures = {
    'Ist das Feuer gel√∂scht?': 'Feuer l√∂schen oder Brand melden.',
    'Wurde der Bereich evakuiert?': 'Evakuierung sicherstellen und Personen z√§hlen.'
  };

  document.getElementById('openMeasuresBtn').addEventListener('click', () => {
    const rows = document.querySelectorAll('#questionsTable tbody tr');
    const measures = [];

    rows.forEach(row => {
      const frage = row.cells[1].textContent.trim();
      const inputs = row.querySelectorAll('input[type="radio"]');
      const selected = Array.from(inputs).find(i => i.checked)?.value;
      if (selected === 'nein') {
        measures.push({ frage, massnahme: questionsMeasures[frage] || 'Keine Ma√ünahme definiert.' });
      }
    });

    // Speichere Ma√ünahmen im localStorage
    localStorage.setItem('measuresData', JSON.stringify(measures));

    // √ñffne die bestehende Datei massnahmen.html in neuem Tab
    window.open('massnahmen.html', '_blank');
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  async function generateAndSharePDF() {
    const { jsPDF } = window.jspdf;

    const doc = new jsPDF();
    doc.text("Ma√ünahmen PDF", 10, 10);
    
    // Beispielinhalt ‚Äì passe das hier an!
    const date = document.getElementById("date")?.textContent || "Datum";
    const market = document.getElementById("marketNumber")?.textContent || "Marktnummer";
    const name = document.getElementById("name")?.textContent || "Name";

    doc.text(`Datum: ${date}`, 10, 20);
    doc.text(`Marktnummer: ${market}`, 10, 30);
    doc.text(`Name: ${name}`, 10, 40);

    // PDF in Blob umwandeln
    const pdfBlob = doc.output("blob");

    // Web Share API aufrufen
    if (navigator.canShare && navigator.canShare({ files: [new File([pdfBlob], 'massnahmen.pdf', { type: 'application/pdf' })] })) {
      const file = new File([pdfBlob], "massnahmen.pdf", { type: "application/pdf" });

      try {
        await navigator.share({
          title: "Ma√ünahmen PDF",
          text: "Hier ist die PDF-Datei mit den Ma√ünahmen.",
          files: [file]
        });
      } catch (error) {
        console.error("Teilen fehlgeschlagen:", error);
        alert("Teilen abgebrochen oder nicht m√∂glich.");
      }
    } else {
      alert("Teilen wird auf diesem Ger√§t oder Browser nicht unterst√ºtzt.");
    }
  }
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
function generateAndSharePDF() {
  const element = document.getElementById('measuresSection');
  const opt = {
    margin:       0.5,
    filename:     'massnahmen.pdf',
    image:        { type: 'jpeg', quality: 0.98 },
    html2canvas:  { scale: 2 },
    jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' }
  };

  html2pdf().set(opt).from(element).save();
}
</script>
<footer class="footer">
  <p>
    ¬© <span id="currentYear"></span> Andreas Zott. Alle Rechte vorbehalten.
    <a href="datenschutz.html" rel="noopener noreferrer" target="_blank">Datenschutz</a> |
    <a href="impressum.html" rel="noopener noreferrer" target="_blank">Impressum</a>
  </p>
</footer>

<script>
  document.getElementById("currentYear").textContent = new Date().getFullYear();
</script>

</body>
</html>